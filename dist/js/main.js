function initializeBasicFeatures(){initializeSmoothScroll(),initializeAccordion(),initializeFormValidation(),initializeAnalytics()}function initializeSmoothScroll(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const i=e.getAttribute("href").substring(1),n=document.getElementById(i);n&&n.scrollIntoView({behavior:"smooth",block:"start"})})})}function initializeAccordion(){const e=document.querySelectorAll(".faq__item");e.forEach(t=>{const i=t.querySelector(".faq__question");t.querySelector(".faq__answer");i.addEventListener("click",()=>{const i=t.classList.contains("active");e.forEach(e=>{e.classList.remove("active")}),i||t.classList.add("active")})})}function initializeFormValidation(){document.querySelectorAll("form").forEach(e=>{e.addEventListener("submit",t=>{validateForm(e)||t.preventDefault()})})}function validateForm(e){const t=e.querySelectorAll("input[required], textarea[required]");let i=!0;return t.forEach(e=>{if(e.value.trim()?clearError(e):(showError(e,"この項目は必須です"),i=!1),"email"===e.type&&e.value.trim()){/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.value)||(showError(e,"有効なメールアドレスを入力してください"),i=!1)}}),i}function initializeStorySection(){initializeStoryItemsAnimation(),initializeParallaxEffect()}function initializeStoryItemsAnimation(){const e=document.querySelectorAll(".story__item");if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return void e.forEach(e=>{e.classList.add("in-view")});const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("in-view"),t.unobserve(e.target))})},{threshold:.2,rootMargin:"0px 0px -100px 0px"});e.forEach(e=>{t.observe(e)})}function initializeParallaxEffect(){const e=document.querySelectorAll("[data-parallax]");if(window.matchMedia("(prefers-reduced-motion: reduce)").matches||0===e.length)return;let t=!1;function i(){const i=window.pageYOffset,n=window.innerHeight;e.forEach(e=>{const t=e.getBoundingClientRect(),r=t.top+i,o=t.height;if(i+n>r&&i<r+o){const t=40*((i-r+n)/(n+o))-20;e.style.transform=`translateY(${t}px)`}}),t=!1}window.addEventListener("scroll",()=>{t||(requestAnimationFrame(i),t=!0)})}function initializeVisionSection(){initializeWordAnimation(),initializeVisionAnimation()}function initializeWordAnimation(){const e=document.querySelectorAll(".vision__item-title, .vision__item-text");window.matchMedia("(prefers-reduced-motion: reduce)").matches||e.forEach(e=>{const t=e.textContent.split(" ");e.innerHTML=t.map(e=>`<span class="word">${e}</span>`).join(" ")})}function initializeVisionAnimation(){const e=document.querySelector(".vision__title"),t=document.querySelectorAll(".vision__item");if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return e&&e.classList.add("in-view"),void t.forEach(e=>e.classList.add("in-view"));const i=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("in-view"),e.target.classList.contains("vision__item")&&setTimeout(()=>{animateWords(e.target)},500),i.unobserve(e.target))})},{threshold:.3,rootMargin:"0px 0px -50px 0px"});e&&i.observe(e),t.forEach(e=>i.observe(e))}function animateWords(e){e.querySelectorAll(".word").forEach((e,t)=>{setTimeout(()=>{e.classList.add("animate")},100*t)})}function initializeServicesSection(){initializeServicesTitle(),initializeServicesCTA()}function initializeServicesTitle(){const e=document.querySelector(".services__title");if(!e)return;if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return void e.classList.add("in-view");const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("in-view"),t.unobserve(e.target))})},{threshold:.2,rootMargin:"0px 0px -100px 0px"});t.observe(e)}function initializeServicesCTA(){const e=document.querySelector(".services__cta");if(!e)return;if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return void e.classList.add("in-view");const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("in-view"),t.unobserve(e.target))})},{threshold:.2,rootMargin:"0px 0px -100px 0px"});t.observe(e)}function initializeExperienceSection(){initializeExperienceTitle(),initializeExperienceSlider(),initializeExperienceCTA()}function initializeExperienceTitle(){const e=document.querySelector(".experience__title");if(!e)return;if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return void e.classList.add("in-view");const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("in-view"),t.unobserve(e.target))})},{threshold:.2,rootMargin:"0px 0px -100px 0px"});t.observe(e)}function initializeExperienceSlider(){const e=document.querySelector(".experience__slider"),t=document.querySelector(".experience__track"),i=document.querySelectorAll(".experience__slide"),n=document.getElementById("prevBtn"),r=document.getElementById("nextBtn"),o=document.querySelectorAll(".experience__indicator");if(!e||!t||0===i.length)return;let a=0;const c=i.length,s=window.matchMedia("(prefers-reduced-motion: reduce)").matches;function d(e){e<0||e>=c||(i[a].classList.remove("active"),o[a].classList.remove("active"),a=e,i[a].classList.add("active"),o[a].classList.add("active"),s||(t.style.transform=`translateX(-${100*a}%)`),l())}function l(){n&&(n.disabled=0===a),r&&(r.disabled=a===c-1)}function u(){a>0&&d(a-1)}function m(){a<c-1&&d(a+1)}let f;function h(){s||(f=setInterval(()=>{a<c-1?m():d(0)},5e3))}function v(){clearInterval(f)}n&&n.addEventListener("click",u),r&&r.addEventListener("click",m),o.forEach((e,t)=>{e.addEventListener("click",()=>{d(t)})}),e.addEventListener("keydown",e=>{"ArrowLeft"===e.key?u():"ArrowRight"===e.key&&m()}),e.addEventListener("mouseenter",v),e.addEventListener("mouseleave",h),e.addEventListener("focusin",v),e.addEventListener("focusout",h);let p=0,g=0;e.addEventListener("touchstart",e=>{p=e.touches[0].clientX}),e.addEventListener("touchmove",e=>{g=e.touches[0].clientX}),e.addEventListener("touchend",()=>{const e=p-g;Math.abs(e)>50&&(e>0?m():u()),p=0,g=0}),l(),h()}function initializeExperienceCTA(){const e=document.querySelector(".experience__cta");if(!e)return;if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return void e.classList.add("in-view");const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("in-view"),t.unobserve(e.target))})},{threshold:.2,rootMargin:"0px 0px -100px 0px"});t.observe(e)}function showError(e,t){clearError(e);const i=document.createElement("div");i.className="form-error",i.textContent=t,e.parentNode.appendChild(i),e.classList.add("error")}function clearError(e){const t=e.parentNode.querySelector(".form-error");t&&t.remove(),e.classList.remove("error")}function initializeAnalytics(){document.querySelectorAll(".btn-primary, .btn-secondary").forEach(e=>{e.addEventListener("click",function(){"undefined"!=typeof gtag&&gtag("event","click",{event_category:"cta",event_label:this.textContent.trim()})})});let e=0;window.addEventListener("scroll",()=>{const t=Math.round(window.scrollY/(document.body.scrollHeight-window.innerHeight)*100);t>e&&(e=t,e>=25&&e<50?sendScrollEvent(25):e>=50&&e<75?sendScrollEvent(50):e>=75&&e<100?sendScrollEvent(75):e>=100&&sendScrollEvent(100))})}function sendScrollEvent(e){"undefined"!=typeof gtag&&gtag("event","scroll",{event_category:"engagement",event_label:`${e}%`,value:e})}function isInViewport(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function debounce(e,t){let i;return function(...n){clearTimeout(i),i=setTimeout(()=>{clearTimeout(i),e(...n)},t)}}function throttle(e,t){let i;return function(){const n=arguments,r=this;i||(e.apply(r,n),i=!0,setTimeout(()=>i=!1,t))}}function initializeGSAP(){console.log("GSAP初期化（後で実装）")}function initializeSliders(){console.log("スライダー初期化（後で実装）")}function initializePlyr(){console.log("動画プレイヤー初期化（後で実装）")}function initializeImpactSection(){initializeImpactStatsAnimation(),initializeCountUpAnimation(),initializeChartAnimation(),initializeImpactMessageAnimation()}function initializeImpactStatsAnimation(){const e=document.querySelectorAll(".impact__stat-card");if(0===e.length)return;if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return void e.forEach(e=>{e.classList.add("animate-in")});const t=new IntersectionObserver(e=>{e.forEach((e,i)=>{e.isIntersecting&&(setTimeout(()=>{e.target.classList.add("animate-in")},200*i),t.unobserve(e.target))})},{threshold:.3,rootMargin:"0px 0px -50px 0px"});e.forEach(e=>{t.observe(e)})}function initializeCountUpAnimation(){const e=document.querySelectorAll(".impact__stat-number[data-count]");if(0===e.length)return;if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return void e.forEach(e=>{const t=parseInt(e.dataset.count);e.textContent=t});const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(startCountUp(e.target),t.unobserve(e.target))})},{threshold:.5,rootMargin:"0px 0px -100px 0px"});e.forEach(e=>{t.observe(e)})}function startCountUp(e){const t=parseInt(e.dataset.count),i=performance.now();requestAnimationFrame(function n(r){const o=r-i,a=Math.min(o/2e3,1),c=1===a?1:1-Math.pow(2,-10*a),s=Math.floor(c*t);e.textContent=s,a<1&&(e.classList.add("counting"),setTimeout(()=>{e.classList.remove("counting")},100)),a<1?requestAnimationFrame(n):(e.textContent=t,e.classList.remove("counting"))})}function initializeChartAnimation(){const e=document.querySelector(".impact__chart"),t=document.querySelectorAll(".impact__chart-bar-fill");if(!e||0===t.length)return;if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return e.classList.add("animate-in"),void t.forEach(e=>{const t=e.dataset.width;e.style.setProperty("--bar-width",`${t}%`),e.classList.add("animate-bar")});const i=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("animate-in"),setTimeout(()=>{t.forEach((e,t)=>{setTimeout(()=>{const t=e.dataset.width;e.style.setProperty("--bar-width",`${t}%`),e.classList.add("animate-bar")},300*t)})},500),i.unobserve(e.target))})},{threshold:.3,rootMargin:"0px 0px -50px 0px"});i.observe(e)}function initializeImpactMessageAnimation(){const e=document.querySelector(".impact__message");if(!e)return;if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return void e.classList.add("animate-in");const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("animate-in"),t.unobserve(e.target))})},{threshold:.3,rootMargin:"0px 0px -50px 0px"});t.observe(e)}function initializeInterviewSection(){initializeInterviewAnimations(),initializeTestimonialCards()}function initializeInterviewAnimations(){const e=[".interview__intro",".interview__highlights",".interview__testimonials",".interview__cta"];if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return void e.forEach(e=>{const t=document.querySelector(e);t&&t.classList.add("animate-in")});const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("animate-in"),t.unobserve(e.target))})},{threshold:.2,rootMargin:"0px 0px -100px 0px"});e.forEach(e=>{const i=document.querySelector(e);i&&t.observe(i)})}function initializeTestimonialCards(){const e=document.querySelectorAll(".interview__testimonial-card");if(0===e.length)return;if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return void e.forEach(e=>{e.classList.add("animate-in")});const t=new IntersectionObserver(e=>{e.forEach((e,i)=>{e.isIntersecting&&(setTimeout(()=>{e.target.classList.add("animate-in")},200*i),t.unobserve(e.target))})},{threshold:.3,rootMargin:"0px 0px -50px 0px"});e.forEach(e=>{t.observe(e)})}function initializeValuesSection(){const e=document.querySelectorAll(".values__item");if(0===e.length)return;if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return void e.forEach(e=>e.classList.add("animate-in"));const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("animate-in"),t.unobserve(e.target))})},{threshold:.3,rootMargin:"0px 0px -50px 0px"});e.forEach(e=>t.observe(e))}function initializeServiceDetailsSection(){const e=document.querySelectorAll(".service-details__card");if(0===e.length)return;if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return void e.forEach(e=>e.classList.add("animate-in"));const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("animate-in"),t.unobserve(e.target))})},{threshold:.3,rootMargin:"0px 0px -50px 0px"});e.forEach(e=>t.observe(e))}function initializeFAQSection(){initializeFAQAccordion(),initializeFAQAnimation()}function initializeFAQAccordion(){const e=document.querySelectorAll(".faq__item");e.forEach(t=>{const i=t.querySelector(".faq__question"),n=t.querySelector(".faq__answer");if(!i||!n)return;i.addEventListener("click",()=>{const i=t.classList.contains("active");e.forEach(e=>{e!==t&&e.classList.remove("active")}),i?t.classList.remove("active"):t.classList.add("active")}),i.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),i.click())}),i.setAttribute("tabindex","0"),i.setAttribute("role","button"),i.setAttribute("aria-expanded","false");new MutationObserver(()=>{const e=t.classList.contains("active");i.setAttribute("aria-expanded",e?"true":"false")}).observe(t,{attributes:!0,attributeFilter:["class"]})})}function initializeFAQAnimation(){const e=document.querySelectorAll(".faq__item");if(0===e.length)return;if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return void e.forEach(e=>e.classList.add("animate-in"));const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("animate-in"),t.unobserve(e.target))})},{threshold:.3,rootMargin:"0px 0px -50px 0px"});e.forEach(e=>t.observe(e))}function initializeFooterCTASection(){const e=document.querySelector(".footer-cta__title"),t=document.querySelector(".footer-cta__text"),i=document.querySelector(".footer-cta__buttons");if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return e&&e.classList.add("animate-in"),t&&t.classList.add("animate-in"),void(i&&i.classList.add("animate-in"));const n=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("animate-in"),n.unobserve(e.target))})},{threshold:.3,rootMargin:"0px 0px -50px 0px"});e&&n.observe(e),t&&n.observe(t),i&&n.observe(i)}function initializeFooterSection(){const e=document.querySelectorAll(".footer__content > *"),t=document.querySelectorAll(".footer__bottom > *");if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return e.forEach(e=>e.classList.add("animate-in")),void t.forEach(e=>e.classList.add("animate-in"));const i=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("animate-in"),i.unobserve(e.target))})},{threshold:.3,rootMargin:"0px 0px -50px 0px"});e.forEach(e=>i.observe(e)),t.forEach(e=>i.observe(e))}document.addEventListener("DOMContentLoaded",()=>{console.log("留学サポート LP - 初期化完了"),initializeBasicFeatures(),initializeStorySection(),initializeVisionSection(),initializeServicesSection(),initializeExperienceSection(),initializeImpactSection(),initializeInterviewSection(),initializeValuesSection(),initializeServiceDetailsSection(),initializeFAQSection(),initializeFooterCTASection(),initializeFooterSection()});